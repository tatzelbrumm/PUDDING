# Set default PDK_ROOT
if { ![info exists env(PDK_ROOT)] } {
  puts stderr "Warning: PDK_ROOT env. var. not found or empty, trying to find an open_pdks install"
  if {[file isdir /usr/share/pdk]} {set ::env(PDK_ROOT) /usr/share/pdk
  } elseif {[file isdir /usr/local/share/pdk]} {set ::env(PDK_ROOT) /usr/local/share/pdk
  } elseif {[file isdir $env(HOME)/share/pdk]} {set ::env(PDK_ROOT) $env(HOME)/share/pdk
  } elseif {[file isdir $env(HOME)/.ciel]} {set ::env(PDK_ROOT) $env(HOME)/.ciel
  } else {
    puts stderr {No open_pdks installation found, set PDK_ROOT env. var. and restart xschem}
  }
}

# Set default PDK
if { ![info exists env(PDK)] } {
  set ::env(PDK) ihp-sg13g2
}

# Source the PDK xschemrc file
if {![info exists PDK]} {
    source $env(PDK_ROOT)/$env(PDK)/libs.tech/xschem/xschemrc
}

# Add current directory to xschem library path
set XSCHEM_LIBRARY_PATH "[file dirname [info script]]:$XSCHEM_LIBRARY_PATH"
# append XSCHEM_LIBRARY_PATH :[file dirname [info script]]

# Source the dependencies xschemrc files
foreach rcfile [glob -nocomplain [file dirname [info script]]/../ip/*/xschem/xschemrc] {
  puts "sourcing $rcfile"
  source $rcfile
}

# now force your editor (last-wins)
set editor {pluma}
# optionally also the terminal used for logs
# set terminal 

